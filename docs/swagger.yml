openapi: 3.0.3

info:
  title: Listem API
  #description: API description
  version: 0.0.0

servers:
  - url: /api
#    description: Server description

security:
  - BearerAuth: []
  - ApiKeyAuth: []

tags:
  - name: auth
    description: Authentication endpoints
  - name: users
    description: Users endpoints

paths:
  $ref: './paths/index.yml'

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    ApiKeyAuth:
      type: apiKey
      in: query
      name: accessToken
  requestBodies:
    UserCredentials:
      description: User credentials
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              email:
                type: string
              password:
                type: string
            required:
              - email
              - password
  responses:
    Tokens:
      description: Tokens
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: object
                properties:
                  accessToken:
                    type: string
                    description: Access token (JWT)
                  refreshToken:
                    type: string
                    description: Refresh token (UUID)
                required:
                  - accessToken
                  - refreshToken
            required:
              - data
    UnauthorizedError:
      description: Unauthorized Error
      content:
        application/json:
          schema:
            type: object
            properties:
              errors:
                type: array
                items:
                  type: object
                  properties:
                    code:
                      type: string
                      description: Error code
                    title:
                      type: string
                      description: Error message
                  required:
                    - code
                    - title
            required:
              - errors
    UnprocessableEntity:
      description: Unprocessable Entity
      content:
        application/json:
          schema:
            type: object
            properties:
              errors:
                type: array
                items:
                  type: object
                  properties:
                    code:
                      type: string
                      description: Error code
                    title:
                      type: string
                      description: Error message
                  required:
                    - code
                    - title
            required:
              - errors
    InternalServerError:
      description: Internal Server Error
      content:
        application/json:
          schema:
            type: object
            properties:
              errors:
                type: array
                items:
                  type: object
                  properties:
                    title:
                      type: string
                      description: Error message
                    detail:
                      type: string
                      description: Stack trace
                  required:
                    - title
            required:
              - errors
